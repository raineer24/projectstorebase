<div>
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item text-primary" aria-current="page">Orders</li>
    </ol>
  </nav>
  <div class="options">
    <div class="small">Filters: Status = {{ selectedValue }}, Date Range = {{ fromDate | date:'shortDate' }} - {{ toDate | date:'shortDate' }}</div>
    <div>
      <button type="button" class="btn btn-default btn-sm" (click)="showFilter = !showFilter">Change Filter<i class="caret"></i></button>
      &nbsp;|&nbsp;
      <button type="button" class="btn btn-default btn-sm" (click)="refresh()">Refresh List</button>
    </div>
    <div *ngIf="showFilter" class="filter well">
      <form class="form-inline small">
        <div class="form-group">
          <label>Status:</label>
          <select class="form-control btn-sm" [(ngModel)]="selectedValue" name="status">
            <option value="ALL" selected>ALL</option>
            <option value="PENDING">PENDING</option>
            <option value="IN-PROGRESS">IN-PROGRESS</option>
            <option value="ASSEMBLED">ASSEMBLED</option>
            <option value="IN-TRANSIT">IN-TRANSIT</option>
            <option value="COMPLETE">COMPLETE</option>
            <option value="CANCELLED">CANCELLED</option>
            <option value="RETURNED">RETURNED</option>
            <option value="RETURNED-COMPLETE">RETURNED-COMPLETE</option>
          </select>
        </div>
        <div class="form-group">
          <label>Date Range:</label>
          <input type="text" placeholder="From" class="form-control btn-sm"
            bsDatepicker [(ngModel)]="fromDate" name="fromdate" [maxDate]="toDate">
          <input type="text" placeholder="To" class="form-control btn-sm"
            bsDatepicker [(ngModel)]="toDate" name="todate" [maxDate]="maxDate">
        </div>
        <button type="button" class="btn btn-default btn-sm" (click)="applyFilter()">Apply Filter</button>
      </form>
    </div>
  </div>
  <br>
  <div>
    <div *ngFor="let order of orders; let i = index" class="panel panel-default">
      <div class="panel-body row">
        <div class="col-xs-12 col-sm-8">
          Order Number: <b><span class="text-primary">{{order.orderNumber}}</span></b><br>
          <small>
            Date Ordered: <span>{{ order.dateCreated | date:'short' }}</span><br>
            Status: <b><span class="text-primary">{{ order.status | uppercase }}</span></b><br>
            <span *ngIf="order.sellerAccountName">Handled By: <b>{{ order.sellerAccountName }}</b><br></span>
            Last Updated On: <span>{{ order.dateUpdated | date:'short' }}</span><br>
          </small>
        </div>
        <div class="col-xs-12 col-sm-4">
          <button *ngIf="(order.status | uppercase)== 'PENDING'" type="button" class="btn btn-default btn-lg" (click)="takeOrder(order)">TAKE ORDER</button>
          <button *ngIf="(order.status | uppercase)== 'IN-PROGRESS' && order.assembledBy == userData.id" type="button" class="btn btn-default btn-lg" [routerLink]="['/admin/order-assemble/edit',order.id]">CONTINUE</button>
          <button *ngIf="(order.status | uppercase)== 'ASSEMBLED'" type="button" class="btn btn-default btn-lg" (click)="deliverOrder(order)">DELIVER ORDER</button>
          <button *ngIf="(order.status | uppercase)!= 'PENDING' && (order.status | uppercase)!= 'IN-PROGRESS' && (order.status | uppercase)!= 'ASSEMBLED'" type="button" class="btn btn-default btn-lg" [routerLink]="['/admin/order-assemble/view',order.id]">VIEW ORDER</button>
        </div>
      </div>
    </div>
  </div>
</div>
